---
id: byrole
title: ByRole
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

> getByRole, queryByRole, getAllByRole, queryAllByRole, findByRole,
> findAllByRole

## API

```typescript
getByRole(
  // å¦‚æœä½¿ç”¨äº† `screen` å¯¹è±¡ï¼Œåˆ™å¿½ç•¥ container å‚æ•°:
  container: HTMLElement,
  role: string,
  options?: {
    hidden?: boolean = false,
    name?: TextMatch,
    description?: TextMatch,
    selected?: boolean,
    checked?: boolean,
    pressed?: boolean,
    suggest?: boolean,
    current?: boolean | string,
    expanded?: boolean,
    queryFallbacks?: boolean,
    level?: number,
  }): HTMLElement
```

æ ¹æ®æŒ‡å®šè§’è‰²æ¥æŸ¥è¯¢å…ƒç´  (è¿˜æ”¯æŒæ¥å—ä¸€ä¸ª [`TextMatch`](queries/about.mdx#textmatch))ã€‚
è¯·è€ƒè™‘ä½¿ç”¨é»˜è®¤è§’è‰²ï¼Œä¾‹å¦‚ `<button />` å…·æœ‰ `button` è§’è‰²ï¼Œè€Œæ— éœ€æ˜¾å¼è®¾ç½® `role` å±æ€§ã€‚ ä½ å¯ä»¥å‚è€ƒ 
[å¸¦æœ‰é»˜è®¤å’Œæ‰€éœ€è§’è‰²çš„HTMLå…ƒç´ è¡¨](https://www.w3.org/TR/html-aria/#docconformance).

è¯·æ³¨æ„ï¼Œè®¾ç½®ä¸éšå¼çš„ARIAè¯­ä¹‰ç›¸åŒ¹é…çš„ `role` å’Œï¼ˆæˆ–ï¼‰`aria-*` å±æ€§æ˜¯ä¸å¿…è¦çš„ï¼Œä¹Ÿä¸æ¨èè¿™æ ·åšï¼Œ
å› ä¸ºè¿™äº›å±æ€§å·²ç»è¢«æµè§ˆå™¨è®¾ç½®äº†ï¼Œè€Œä¸”æˆ‘ä»¬åœ¨ä½¿ç”¨ `role` å’Œ `aria-*` å±æ€§æ—¶ï¼Œä¸èƒ½ä¸æ‰€è¿°çš„è¯­ä¹‰ç›¸å†²çªã€‚
ä¾‹å¦‚ï¼Œä¸€ä¸ª `button` å…ƒç´ ä¸èƒ½æœ‰ `heading` çš„è§’è‰²å±æ€§ï¼Œå› ä¸º `button` å…ƒç´ çš„é»˜è®¤ç‰¹æ€§ä¸ `heading` è§’è‰²ç›¸å†²çªã€‚

> è§’è‰²æ˜¯æŒ‰å­—é¢å€¼åŒ¹é…çš„ï¼Œæ²¡æœ‰ç»§æ‰¿ARIAè§’è‰²çš„å±‚æ¬¡ç»“æ„ã€‚å› æ­¤ï¼ŒæŸ¥è¯¢åƒ `checkbox` è¿™æ ·çš„è¶…ç±»è§’è‰²
> å°†ä¸åŒ…æ‹¬åƒ `switch`è¿™æ ·çš„å­ç±»è§’è‰²çš„å…ƒç´ ã€‚

ä½ å¯ä»¥é€šè¿‡ä»–ä»¬çš„[å¯è®¿é—®åç§°æˆ–æè¿°](https://www.w3.org/TR/accname-1.1/)æ¥æŸ¥è¯¢è¿”å›çš„å…ƒç´ ã€‚
åœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¯è®¿é—®çš„åç§°ç­‰äºä¾‹å¦‚è¡¨å•å…ƒç´ çš„æ ‡ç­¾ï¼Œæˆ–æŒ‰é’®çš„æ–‡æœ¬å†…å®¹ï¼Œæˆ– `aria-label` å±æ€§çš„å€¼ã€‚
å¦‚æœåœ¨æ¸²æŸ“çš„å†…å®¹ä¸Šæœ‰å¤šä¸ªå…·æœ‰ç›¸åŒä½œç”¨çš„å…ƒç´ ï¼Œå®ƒå¯ä»¥ç”¨æ¥æŸ¥è¯¢ä¸€ä¸ªç‰¹å®šçš„å…ƒç´ ã€‚å…³äºæ·±å…¥çš„æŒ‡å—ï¼Œ
è¯·æŸ¥çœ‹[TPGiä¸Š "ä»€ä¹ˆæ˜¯å¯è®¿é—®çš„åç§°ï¼Ÿ"](https://www.tpgi.com/what-is-an-accessible-name/)ã€‚
å¦‚æœä½ åªç”¨ `getByText('The name')` æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ ï¼Œ
å¾ˆå¤šæ—¶å€™ä½¿ç”¨getByRole(expectedRole, { name: 'The name' })ä¼šæ›´å¥½ã€‚å¯è®¿é—®åç§°æŸ¥è¯¢å¹¶ä¸å–ä»£å…¶ä»–æŸ¥è¯¢ï¼Œ
å¦‚ `*ByAlt` æˆ– `*ByTitle`ã€‚è™½ç„¶å¯è®¿é—®åç§°å¯ä»¥ä¸è¿™äº›å±æ€§ç›¸ç­‰ï¼Œä½†å®ƒå¹¶ä¸å–ä»£è¿™äº›å±æ€§çš„åŠŸèƒ½ã€‚
ä¾‹å¦‚ `<img aria-label="fancy image" src="fancy.jpg" />` ä¼šè¿”å›ç»™ `getByAltText('fancy image')`ã€‚
ç„¶è€Œï¼Œå¦‚æœ `fancy.jpg` ä¸èƒ½è¢«åŠ è½½ï¼Œå›¾ç‰‡å°†ä¸ä¼šæ˜¾ç¤ºå…¶æè¿°ã€‚å¦æƒ³åœ¨ä½ çš„æµ‹è¯•ä¸­æ–­è¨€è¿™ä¸€åŠŸèƒ½ï¼Œå–å†³äºä½ ã€‚

## é€‰é¡¹

### `hidden`

å¦‚æœä½ æŠŠ `hidden` è®¾ç½®ä¸º `true`ï¼Œé€šå¸¸è¢«æ’é™¤åœ¨å¯è®¿é—®æ€§æ ‘ä¹‹å¤–çš„å…ƒç´ ä¹Ÿä¼šè¢«è€ƒè™‘åœ¨æŸ¥è¯¢ä¸­ã€‚
é»˜è®¤è¡Œä¸ºéµå¾ª https://www.w3.org/TR/wai-aria-1.2/#tree_exclusionï¼Œ
ä½† `role="none"` å’Œ `role="presentation"` é™¤å¤–ï¼Œå®ƒä»¬åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šè¢«è€ƒè™‘åœ¨æŸ¥è¯¢ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <main aria-hidden="true">
    <button>Open dialog</button>
  </main>
  <div role="dialog">
    <button>Close dialog</button>
  </div>
</body>
```

`getByRole('button')` å°†åªè¿”å› "å…³é—­å¯¹è¯æ¡†" çš„æŒ‰é’®ã€‚è¦å¯¹ "æ‰“å¼€ "å¯¹è¯æ¡†æŒ‰é’®è¿›è¡Œæ–­è¨€ï¼Œ
ä½ éœ€è¦ä½¿ç”¨getAllByRole('button', { hidden: true })ã€‚

`hidden` çš„é»˜è®¤å€¼å¯ä»¥è¢«[é…ç½®](../dom-testing-library/api-configuration.mdx#configuration)ã€‚

### `selected`

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `selected: true` æˆ– `selected: false` æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ çš„é€‰æ‹©çŠ¶æ€ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <div role="tablist">
    <button role="tab" aria-selected="true">Native</button>
    <button role="tab" aria-selected="false">React</button>
    <button role="tab" aria-selected="false">Cypress</button>
  </div>
</body>
```

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `getByRole('tab', { selected: true })` æ¥è·å¾— "Native" çš„tabã€‚
è¦äº†è§£æ›´å¤šå…³äºé€‰å®šçŠ¶æ€å’Œå“ªäº›å…ƒç´ å¯ä»¥æœ‰è¿™ç§çŠ¶æ€ï¼Œè¯·çœ‹ [ARIA `aria-selected`](https://www.w3.org/TR/wai-aria-1.2/#aria-selected)ã€‚

### `checked`

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `checked: true` æˆ– `checked: false` æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ çš„æ£€æŸ¥çŠ¶æ€ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <section>
    <button role="checkbox" aria-checked="true">Sugar</button>
    <button role="checkbox" aria-checked="false">Gummy bears</button>
    <button role="checkbox" aria-checked="false">Whipped cream</button>
  </section>
</body>
```

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `getByRole('checkbox', { checked: true })` è·å¾— "Sugar"é€‰é¡¹ã€‚
è¦äº†è§£æ›´å¤šå…³äºæ£€æŸ¥çŠ¶æ€å’Œå“ªäº›å…ƒç´ å¯ä»¥æœ‰è¿™ç§çŠ¶æ€ï¼Œè¯·çœ‹[ARIA `aria-checked`](https://www.w3.org/TR/wai-aria-1.2/#aria-checked)ã€‚

> **æ³¨æ„**
>
> å¤é€‰æ¡†æœ‰ä¸€ä¸ª "æ··åˆ" çŠ¶æ€ï¼Œå®ƒè¢«è®¤ä¸ºæ—¢ä¸æ˜¯é€‰ä¸­ä¹Ÿä¸æ˜¯æœªé€‰ä¸­ï¼ˆè¯¦è§[è¿™é‡Œ](https://www.w3.org/TR/html-aam-1.0/#details-id-56)ï¼‰ã€‚

### `current`

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `current: boolean | string` æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ çš„å½“å‰çŠ¶æ€ã€‚
è¯·æ³¨æ„ï¼Œç”±äº `false` æ˜¯ `aria-current` çš„é»˜è®¤å€¼ï¼Œæ‰€ä»¥æ²¡æœ‰ `aria-current` å±æ€§ä¼šåŒ¹é… `current: false`ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <nav>
    <a href="current/page" aria-current="true">ğŸ‘</a>
    <a href="another/page">ğŸ‘</a>
  </nav>
</body>
```

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `getByRole('link', { current: true })` å¾—åˆ°"ğŸ‘"é“¾æ¥ï¼Œ
é€šè¿‡è°ƒç”¨ `getByRole('link', { current: false })` å¾—åˆ°"ğŸ‘"ã€‚è¦äº†è§£æ›´å¤šå…³äºå½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œ
è¯·å‚é˜…[ARIA `aria-current`](https://www.w3.org/TR/wai-aria-1.2/#aria-current)ã€‚

### `pressed`

æŒ‰é’®å¯ä»¥æœ‰ä¸€ä¸ªæŒ‰ä¸‹çš„çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® `pressed: true` æˆ– `pressed: false` æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ çš„æŒ‰ä¸‹çŠ¶æ€ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <section>
    <button aria-pressed="true">ğŸ‘</button>
    <button aria-pressed="false">ğŸ‘</button>
  </section>
</body>
```

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `getByRole('button', { pressed: true })` è·å¾—"ğŸ‘"æŒ‰é’®ã€‚
è¦äº†è§£æ›´å¤šå…³äºæŒ‰ä¸‹çŠ¶æ€çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[ARIA `aria-pressed`](https://www.w3.org/TR/wai-aria-1.2/#aria-pressed)ã€‚

### `suggest`

é€šè¿‡å°†æ­¤å€¼è®¾ç½®ä¸º`false`ï¼Œå¯ä»¥ç¦ç”¨ä¸ºç‰¹å®šæŸ¥è¯¢[æŠ›å‡ºå»ºè®®](../dom-testing-library/api-configuration.mdx#throwsuggestions-experimental)çš„åŠŸèƒ½ã€‚
å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸º`true`ï¼Œåˆ™ä¼šå¯¹ç‰¹å®šæŸ¥è¯¢æŠ›å‡ºå»ºè®®ã€‚

### `expanded`

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `expanded: true` æˆ– `expanded: false` æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ çš„æ‰©å±•çŠ¶æ€ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <nav>
    <ul>
      <li>
        <a aria-expanded="false" aria-haspopup="true" href="..."
          >Expandable Menu Item</a
        >
        <ul>
          <li><a href="#">Submenu Item 1</a></li>
          <li><a href="#">Submenu Item 1</a></li>
        </ul>
      </li>
      <li><a href="#">Regular Menu Item</a></li>
    </ul>
  </nav>
</body>
```

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `getByRole('link', { expanded: false })` è·å¾— "Expandable Menu Item"é“¾æ¥ã€‚
è¦äº†è§£æ›´å¤šå…³äºæ‰©å±•çŠ¶æ€ä»¥åŠå“ªäº›å…ƒç´ å¯ä»¥æ‹¥æœ‰è¿™ç§çŠ¶æ€ï¼Œè¯·çœ‹[ARIA `aria-expanded`](https://www.w3.org/TR/wai-aria-1.2/#aria-expanded)ã€‚

```html
<div role="dialog">...</div>
```

<Tabs defaultValue="native" values={[ { label: 'Native', value: 'native', }, {
label: 'React', value: 'react', }, { label: 'Cypress', value: 'cypress', }, ] }>
<TabItem value="native">

```js
import {screen} from '@testing-library/dom'

const dialogContainer = screen.getByRole('dialog')
```

  </TabItem>
  <TabItem value="react">

```jsx
import {render, screen} from '@testing-library/react'

render(<MyComponent />)
const dialogContainer = screen.getByRole('dialog')
```

  </TabItem>
  <TabItem value="cypress">

```js
cy.findByRole('dialog').should('exist')
```

  </TabItem>
  </Tabs>

### `queryFallbacks`

é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå‡å®šæ¯ä¸ªå…ƒç´ çš„ç¬¬ä¸€ä¸ªè§’è‰²è¢«æ”¯æŒï¼Œæ‰€ä»¥åªæœ‰ç¬¬ä¸€ä¸ªè§’è‰²å¯ä»¥è¢«æŸ¥è¯¢ã€‚
å¦‚æœä½ éœ€è¦é€šè¿‡å®ƒçš„ä»»ä½•ä¸€ä¸ªå›é€€è§’è‰²æ¥æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ `queryFallbacks: true`ã€‚

ä¾‹å¦‚ï¼Œ`getByRole('switch')` å°†æ€»æ˜¯åŒ¹é… `<div role="switch checkbox" />`ï¼Œ
å› ä¸ºå®ƒæ˜¯ç¬¬ä¸€ä¸ªè§’è‰²ï¼Œè€Œ `getByRole('checkbox')` å°±ä¸ä¼šã€‚ç„¶è€Œï¼Œ`getByRole('checkbox', { queryFallbacks: true })`
ä¼šå¯ç”¨æ‰€æœ‰å›é€€è§’è‰²ï¼Œå› æ­¤ä¼šåŒ¹é…åŒä¸€ä¸ªå…ƒç´ ã€‚

> ä¸€ä¸ªå…ƒç´ åœ¨ä¸€ä¸ªç‰¹å®šçš„ç¯å¢ƒä¸­æ²¡æœ‰å¤šç§è§’è‰²ã€‚å®ƒæœ‰ä¸€ä¸ªå•ä¸€çš„ã€‚å±æ€§ä¸­çš„å¤šä¸ªè§’è‰²è¢«ä»å·¦åˆ°å³è¯„ä¼°ï¼Œ
> ç›´åˆ°ç¯å¢ƒæ‰¾åˆ°å®ƒæ‰€ç†è§£çš„ç¬¬ä¸€ä¸ªè§’è‰²ã€‚å½“æ–°çš„è§’è‰²è¢«å¼•å…¥å¹¶ä¸”ä½ æƒ³å¼€å§‹æ”¯æŒè¿™äº›è§’è‰²ä»¥åŠä¸ç†è§£è¯¥è§’è‰²çš„æ—§ç¯å¢ƒæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚

### `level`

å…·æœ‰ `heading` è§’è‰²çš„å…ƒç´ å¯ä»¥é€šè¿‡ä»»ä½•æ ‡é¢˜çº§åˆ« `getByRole('heading')`è¿›è¡ŒæŸ¥è¯¢ï¼Œ
æˆ–è€…é€šè¿‡ä½¿ç”¨ `level` é€‰é¡¹ `getByRole('heading', { level: 2 })` æŸ¥è¯¢ç‰¹å®šçš„æ ‡é¢˜çº§åˆ«ã€‚

`level` é€‰é¡¹æŸ¥è¯¢å…·æœ‰ `heading` è§’è‰²çš„å…ƒç´ ï¼Œè¿™äº›å…ƒç´ ä¸ç”±è¯­ä¹‰HTMLæ ‡é¢˜å…ƒç´  `<h1>-<h6>` ç¡®å®šçš„æŒ‡å®šçº§åˆ«ç›¸åŒ¹é…ï¼Œ
æˆ–è€…ä¸ `aria-level` å±æ€§ç›¸åŒ¹é…ã€‚

ç¤ºä¾‹å¦‚ä¸‹,

```html
<body>
  <section>
    <h1>Heading Level One</h1>
    <h2>First Heading Level Two</h2>
    <h3>Heading Level Three</h3>
    <div role="heading" aria-level="2">Second Heading Level Two</div>
  </section>
</body>
```

ä½ å¯ä»¥ä½¿ç”¨ `getByRole('heading', { level: 3 })` æ¥æŸ¥è¯¢ `Heading Level Three` æ ‡é¢˜ã€‚

```js
getByRole('heading', {level: 1})
// <h1>Heading Level One</h1>

getAllByRole('heading', {level: 2})
// [
//   <h2>First Heading Level Two</h2>,
//   <div role="heading" aria-level="2">Second Heading Level Two</div>
// ]
```

è™½ç„¶å¯ä»¥æ˜ç¡®åœ°åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šè®¾ç½® `role="heading"` å’Œ `aria-level` å±æ€§ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨è¯­ä¹‰å­¦ä¸Šçš„HTMLæ ‡é¢˜ `<h1>-<h6>`ã€‚

è¦äº†è§£æ›´å¤šå…³äº `aria-level` å±æ€§çš„ä¿¡æ¯ï¼Œè¯·å‚è§ [ARIA `aria-level`](https://www.w3.org/TR/wai-aria-1.2/#aria-level)ã€‚

> `level` é€‰é¡¹åªé€‚ç”¨äº `heading` è§’è‰²ã€‚å½“ä¸ä»»ä½•å…¶ä»–è§’è‰²ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚

### `description`

ä½ å¯ä»¥é€šè¿‡ä»–ä»¬çš„[å¯è®¿é—®æè¿°](https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_description)æ¥è¿‡æ»¤è¿”å›çš„å…ƒç´ ï¼Œ
ç”¨äºé‚£äº›ä½ æœ‰å‡ ä¸ªå…·æœ‰ç›¸åŒè§’è‰²çš„å…ƒç´ ï¼Œä»–ä»¬æ²¡æœ‰ä¸€ä¸ªå¯è®¿é—®çš„åå­—ï¼Œä½†ä»–ä»¬æœ‰ä¸€ä¸ªæè¿°çš„æƒ…å†µã€‚
<br />
è¿™å°†æ˜¯å…·æœ‰ `alerttdialog` è§’è‰²çš„å…ƒç´ çš„æƒ…å†µï¼Œå…¶ä¸­çš„ `aria-describedby` å±æ€§è¢«ç”¨æ¥æè¿°å…ƒç´ çš„å†…å®¹ã€‚

ä¾‹å¦‚ï¼Œåœ¨

```html
<body>
  <ul>
    <li role="alertdialog" aria-describedby="notification-id-1">
      <div><button>Close</button></div>
      <div id="notification-id-1">You have unread emails</div>
    </li>
    <li role="alertdialog" aria-describedby="notification-id-2">
      <div><button>Close</button></div>
      <div id="notification-id-2">Your session is about to expire</div>
    </li>
  </ul>
</body>
```

ä½ å¯ä»¥åƒè¿™æ ·æŸ¥è¯¢ä¸€ä¸ªç‰¹å®šçš„å…ƒç´ :

```js
getByRole('alertdialog', {description: 'Your session is about to expire'})
```
